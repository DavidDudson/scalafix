<!DOCTYPE html><html><head><link href="META-INF/resources/webjars/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" /><link href="styles.css" rel="stylesheet" /><link rel="shortcut icon" type="image/png" href="favicon.png" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style>
.scalatex-site-Styles-headerLink{
  color: #777;
  opacity: 0.05;
  text-decoration: none;
}


.scalatex-site-Styles-hoverContainer:hover .scalatex-site-Styles-headerLink{
  color: #777;
  opacity: 0.5;
  text-decoration: none;
}
.scalatex-site-Styles-hoverContainer:hover .scalatex-site-Styles-headerLink:hover{
  opacity: 1.0;
}
.scalatex-site-Styles-hoverContainer:hover .scalatex-site-Styles-headerLink:active{
  opacity: 0.75;
}

.scalatex-site-Styles-content{
  color: #777;
  line-height: 1.6em;
  margin: 0 auto;
  margin-left: auto;
  margin-right: auto;
  max-width: 800px;
  padding: 0 1em;
  padding-bottom: 50px;
}
.scalatex-site-Styles-content *{
  position: relative;
}
.scalatex-site-Styles-content p{
  text-align: justify;
}
.scalatex-site-Styles-content a:link{
  color: #37a;
  text-decoration: none;
}
.scalatex-site-Styles-content a:visited{
  color: #949;
  text-decoration: none;
}
.scalatex-site-Styles-content a:hover{
  text-decoration: underline;
}
.scalatex-site-Styles-content a:active{
  color: #000;
  text-decoration: underline;
}
.scalatex-site-Styles-content code{
  color: #000;
}

/*Workaround for bug in highlight.js IDEA theme*/
span.hljs-tag, span.hljs-symbol{
    background: none;
}
    </style><title>scalafix - a Scala rewrite tool</title><script src="scripts.js"></script></head><body><div>

<div style="margin: 0px;color: #333;text-align: center;padding: 2.5em 2em 0;border-bottom: 1px solid #eee;display: block;" id="scalafix-aScalarewritetool" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><h1 style="margin: 0.2em 0;font-size: 3em;font-weight: 300;">scalafix - a Scala rewrite tool<a class=" scalatex-site-Styles-headerLink" href="#scalafix-aScalarewritetool" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a></h1><br /><h2 style="font-weight: 300;color: #ccc;padding: 0px;margin-top: 0px;">0.3.4</h2></div><div class=" scalatex-site-Styles-content">
  

<p>
  <a href="https://gitter.im/scalacenter/scalafix?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://camo.githubusercontent.com/382ebf95f5b4df9275ac203229928db8c8fd5c50/68747470733a2f2f6261646765732e6769747465722e696d2f6f6c6166757270672f7363616c61666d742e737667" alt="Join the chat at https://gitter.im/scalacenter/scalafix" data-canonical-src="https://badges.gitter.im/scalacenter/scalafix.svg" style="max-width:100%;"></a>
</p>
<p>
  Scalafix is a Scala code rewriting tool and library.
  This effort follows the Scala Center Advisory Board proposal:
  <a href="http://scala-lang.org/blog/2016/05/30/scala-center-advisory-board.html#the-first-meeting">Clarification of Scala to Dotty migration path</a>.
  The long-term goal of the project is to automate migration from Scala 2.x to <a href="http://dotty.epfl.ch/">Dotty</a>,
  a next-generation Scala compiler.
</p>
<p>
  The name &quot;scalafix&quot; is inspired by
  <a href="https://golang.org/cmd/fix/">gofix</a>,
  a similar tool used to migrate code written in the Go programming language.
</p>
<div style="margin: 0px;color: #333;text-align: center;padding: 2.5em 2em 0;border-bottom: 1px solid #eee;display: block;" id="Links" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><h1 style="margin: 0.2em 0;font-size: 3em;font-weight: 300;">Links<a class=" scalatex-site-Styles-headerLink" href="#Links" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a></h1><br /></div>

  <ul>
    <li>
      October 24 2016: Read the v0.1 release announcement <br /> <a href="http://www.scala-lang.org/blog/2016/10/24/scalafix.html">http://www.scala-lang.org/blog/2016/10/24/scalafix.html</a></li>
    <li>
      December 12 2016: See the talk about scalafix at Scala eXchange (requires login) <a href="https://skillsmatter.com/skillscasts/9117-smooth-migrations-to-dotty-with-scalafix#video">https://skillsmatter.com/skillscasts/9117-smooth-migrations-to-dotty-with-scalafix#video</a>
</li></ul>

  

<div style="margin: 0px;color: #333;text-align: center;padding: 2.5em 2em 0;border-bottom: 1px solid #eee;display: block;" id="Installation" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><h1 style="margin: 0.2em 0;font-size: 3em;font-weight: 300;">Installation<a class=" scalatex-site-Styles-headerLink" href="#Installation" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a></h1><br /></div>

  <p>
    Scalafix can used either as a tool or a library.
    Integrations are currently limited to the command-line, but it may be possible
    to add IDE integrations in the future.
</p>
  <h1 id="sbt-scalafix" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#sbt-scalafix" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>sbt-scalafix</h1>
    sbt-scalafix is an integration to run pre-made scalafix rewrites as sbt commands.

    <pre><code class="scala scalatex-site-Styles-highlightMe">addSbtPlugin(&quot;ch.epfl.scala&quot; % &quot;sbt-scalafix&quot; % &quot;0.3.4&quot;)
</code></pre>
    <ul>
      <li>
        <code>sbt scalafix</code> runs <a href="#Rewrites">Rewrites</a>.</li>
      <li>
        uses scalafix-nsc, a compiler plugin, to run rewrites during compilation.
        The compiler plugin is disabled by default, <code>scalafixEnabled in ThisBuild := true</code>
        enables the compiler plugin for your entire build.</li>
      <li>
        Configuration is read from <code>.scalafix.conf</code>.
        See <a href="#Configuration">Configuration</a> for more details on how to customize which rewrites to run.</li>
      <li>
        Scalafix supports 2.11 and 2.12.
        Projects with <code>scalaVersion</code> 2.10 are ignored by scalafix.
</li></ul>
  <h1 id="sbt-scalahost" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#sbt-scalahost" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>sbt-scalahost</h1>
    sbt-scalahost is an integration to run custom scalafix rewrites using the scala.meta
    semantic API.

    <pre><code class="scala scalatex-site-Styles-highlightMe">// project/plugins.sbt
addSbtPlugin(&quot;org.scalameta&quot; % &quot;sbt-scalahost&quot; % &quot;1.7.0&quot;)

// build.sbt
val rewrites = project
  .settings(
    scalaVersion := &quot;2.11.8&quot;, // 2.12.x is also supported
    libraryDependencies += &quot;ch.epfl.scala&quot; % &quot;scalafix-core&quot; % &quot;0.3.4&quot; cross CrossVersion.full
  )
  .dependsOn(
    projectToPerformRewritesOn % Scalameta
  )

// in rewrites/src/main/scala/Rewrites.scala
...
implicit mirror = scala.meta.Mirror()
val source = mirror.sources.head
val ctx = scalafix.rewrite.RewriteCtx(source,
  scalafix.config.ScalafixConfig(), mirror)
val patched = Patch(source, Seq(
  scalafix.util.TreePatch.AddGlobalImport(
    importer&quot;scala.collection.immutable.Seq&quot;))
)
...
</code></pre>
    For more information about sbt-scalahost, see
    <a href="https://github.com/scalameta/sbt-semantic-example">sbt-semantic-example</a>.
    For more information about using scalafix as a library, see <a href="#scalafix-core">scalafix-core</a>.

  <h1 id="scalafix-core" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#scalafix-core" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>scalafix-core</h1>
    Scalafix can be used as a library to run custom rewrites.
    <pre><code class="scala scalatex-site-Styles-highlightMe">// &lt; 0.3.3
libraryDependencies += &quot;ch.epfl.scala&quot; %% &quot;scalafix-core&quot; % &quot;0.3.4&quot;
// 0.3.3 and onwards
libraryDependencies += &quot;ch.epfl.scala&quot; % &quot;scalafix-core&quot; % &quot;0.3.4&quot; cross CrossVersion.full

// pre-release version
resolvers += Resolver.bintrayRepo(&quot;scalameta&quot;, &quot;maven&quot;)
libraryDependencies += &quot;ch.epfl.scala&quot; % &quot;scalafix-core&quot; % &quot;0.3.4+24-b98411b0&quot; cross CrossVersion.full
</code></pre>
    By using scalafix as a library, you have full control of how/when/where
    rewrites are written.

    <p>
      When writing custom rewrites, you should decide what API you need.
      There currently available APIs are:

      <ul>
        <li>
          Syntactic api. This is the easiest option but also the least powerful one.
          It does not provide access to compilation information such as symbols/types.
          Just create a <code>scalafix.rewrite.Rewrite[Any]</code> and go!</li>
        <li>
          <code>scala.meta.Mirror</code>, aka.
          <a href="https://github.com/scalameta/scalameta/blob/master/changelog/1.6.0.md#semantic-api">scala.meta semantic API</a>.
          See <a href="#sbt-scalahost">sbt-scalahost</a> on how to construct a <code>scala.meta.Mirror</code>.
          Once you have a <code>Mirror</code> instance, you can create a
          <code>scalafix.rewrite.RewriteCtx[Mirror]</code> for each <code>scala.meta.Source</code> in
          <code>scala.meta.Mirror.sources</code>.</li>
        <li>
          <code>scalafix.rewrite.ScalafixMirror</code>. This option is currently in
          use by <a href="#sbt-scalafix">sbt-scalafix</a> but is being phased out in favor of
          <code>Mirror</code>. <code>ScalafixMirror</code> extends <code>Mirror</code> with a
          few custom methods that we will try to eventually contribute upstream
          to <code>Mirror</code>.
          <p>
            It is possible to run custom rewrites using <code>ScalafixMirror</code>, but
            the setup is complex.
            You need to ensure that your compiled rewrite is included in the compiler
            classpath. Once the rewrite is in the compiler classpath, you
            can enable your rewrite with
            <code>rewrites = [_root_.fully.qualified.name.of.rewrite]</code>.
            Note, your rewrite needs to be an <code>object</code>.
            For more question about this option, don't hesitate to ask on Gitter.
</p></li></ul></p>
    <p>
      Scalafix as a library is still under heavy development.
      Feedback is very welcome.
      Be prepared for breaking changes.
</p>
  <h1 id="scalafix-cli" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#scalafix-cli" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>scalafix-cli</h1>
    <p>
      A 16kb bootstrap script can be downloaded from <a href="https://github.com/scalacenter/scalafix/raw/master/scalafix">here</a>.
      The script will download necessary dependencies on the first run.
</p>
    <p>
      Alternatively, you can build the boostrap script yourself with
      <a href="https://github.com/coursier/coursier#command-line">coursier</a>.
      Once you have the <code>coursier</code> command-line installed, run

      <pre><code class="scala scalatex-site-Styles-highlightMe">// pre-release
coursier bootstrap ch.epfl.scala:scalafix-fatcli_2.11.11:0.3.4+24-b98411b0 -r bintray:scalameta/maven -r 'ivy:https://dl.bintray.com/scalameta/maven/[organisation]/[module]/(scala_[scalaVersion]/)(sbt_[sbtVersion]/)[revision]/[type]s/[artifact](-[classifier]).[ext]' -f --main scalafix.cli.Cli -o scalafix
</code></pre>
      <p>
        The <code>fatcli</code> module depends on the <code>scalahost-nsc</code> compiler plugin
        fatjar, making it unnecessary to pass in the <code>--scalahost-nsc-plugin-path</code>
        flag.
</p>
      <p>
        Once the scalafix cli is installed, consult the help page for further usage
        instructions
</p></p>
    <pre><code class="scala scalatex-site-Styles-highlightMe">scalafix 0.3.4+24-b98411b0
Usage: scalafix [options]
  --usage  
        Print usage and exit
  --help | -h  
        Print help message and exit
  --config | -c  &lt;.scalafix.conf OR imports.organize=false&gt;
        Scalafix configuration, either a file path or a hocon string
  --classpath  &lt;entry1.jar:entry2.jar&gt;
        java.io.File.pathSeparator separated list of jar files or directories
        containing classfiles and `semanticdb` files. The `semanticdb`
        files are emitted by the scalahost-nsc compiler plugin and
        are necessary for the semantic API to function. The
        classfiles + jar files are necessary forruntime compilation
        of quasiquotes when extracting symbols (that is,
        `q&quot;scala.Predef&quot;.symbol`).
  --sourcepath  &lt;File2.scala:File1.scala:src/main/scala&gt;
        java.io.File.pathSeparator separated list of Scala source files OR
        directories containing Scala source files.
  --scalahost-nsc-plugin-path  &lt;$HOME/.ivy2/cache/.../scalahost-nsc_2.11.8.jar&gt;
        File path to the scalahost-nsc compiler plugin fatjar, the same path
        that is passed in `-Xplugin:/scalahost.jar`.
        (optional) skip this option by using the &quot;scalafix-fatcli&quot;
        module instead of &quot;scalafix-cli.&quot;
  --rewrites  &lt;ProcedureSyntax OR
               file:LocalFile.scala OR
               scala:full.Name OR
               https://gist.com/.../Rewrite.scala&gt;
        Rewrite rules to run.
        NOTE. rewrite.rules = [ .. ] from --config will also run.
  --files | -f  &lt;File1.scala File2.scala&gt;
        Files to fix. Runs on all *.scala files if given a directory.
  --in-place | -i  
        If true, writes changes to files instead of printing to stdout.
  --out-from  &lt;/shared/&gt;
        Regex that is passed as first argument to
        fileToFix.replaceAll(outFrom, outTo).
  --out-to  &lt;/custom/&gt;
        Replacement string that is passed as second argument to
        fileToFix.replaceAll(outFrom, outTo)
  --single-thread  
        If true, run on single thread. If false (default), use all available cores.
  --debug  
        If true, prints out debug information.
  --no-sys-exit  
        If true, does not sys.exit at the end. Useful for example in sbt-scalafix.

Examples:
  $ scalafix --rewrites ProcedureSyntax Code.scala # print fixed file to stdout
  $ cat .scalafix.conf
  rewrites = [ProcedureSyntax]
  $ scalafix Code.scala # Same as --rewrites ProcedureSyntax
  $ scalafix -i --rewrites ProcedureSyntax Code.scala # write fixed file in-place

Exit status codes:
 Ok=0
 UnexpectedError=1
 ParseError=2
 ScalafixError=3
</code></pre>

  <h1 id="scalafix-nsc" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#scalafix-nsc" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>scalafix-nsc</h1>
    <b>Note.</b> scalafix-nsc is being phased out in favor of scalahost-nsc.

    <p>
      Scalafix can be used directly as a compiler plugin:
      <pre><code class="scala scalatex-site-Styles-highlightMe">// download
https://repo1.maven.org/maven2/ch/epfl/scala/scalafix-nsc_2.12/0.3.4/scalafix-nsc_2.12-0.3.4.jar
// compile
scalac -Xplugin:/path/to/scalafix-nsc_2.12-0.3.4.jar mycode.scala
</code></pre>
      <ul>
        <li>
          The compiler plugin writes fixes directly to source files during compilation.</li>
        <li>
          To specify a configuration file <code>-P:scalafix:/full/path/to/.scalafix.conf</code>.</li>
        See <a href="#Configuration">Configuration</a> for more details.
</ul></p>

  
<div style="margin: 0px;color: #333;text-align: center;padding: 2.5em 2em 0;border-bottom: 1px solid #eee;display: block;" id="Configuration" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><h1 style="margin: 0.2em 0;font-size: 3em;font-weight: 300;">Configuration<a class=" scalatex-site-Styles-headerLink" href="#Configuration" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a></h1><br /></div>
  Scalafix reads configuration from a file using
  <a href="https://github.com/typesafehub/config">HOCON</a>
  syntax.
  I recommend you put a file <code>.scalafix.conf</code> into the root directory of
  your project.

  <h1 id="rewrites" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#rewrites" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>rewrites</h1>
    You can either run a pre-made that comes with scalafix or a custom rewrite
    that you write yourself.

    <h2 id="Pre-maderewrites" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#Pre-maderewrites" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>Pre-made rewrites</h2>
      Available rewrites are listed in <a href="#Rewrites">Rewrites</a>.

      <pre><code class="scala scalatex-site-Styles-highlightMe">rewrites = [ExplicitImplicit] # No rewrites are run if empty.
</code></pre>
    <h2 id="Customrewrites" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#Customrewrites" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>Custom rewrites</h2>
      <pre><code class="scala scalatex-site-Styles-highlightMe">rewrites = [
  &quot;file:readme/MyRewrite.scala&quot; // from local file
  // from url
  &quot;https://gist.githubusercontent.com/olafurpg/fc6f43a695ac996bd02000f45ed02e63/raw/ff0a1a8c71936bb3d06f804274dc042131fd8392/ExampleRewrite.scala&quot;
  // from fully qualified name on classpath
  &quot;scala:scalafix.rewrite.ExplicitImplicit&quot;
]
</code></pre>
  <h1 id="imports" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#imports" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>imports</h1>

    <b>NOTE.</b> This feature is new and may still have bugs that cause rewritten
    code to not compile. Please report back you bump into issues.

    <p>
      Scalafix can organize imports.
      If you use import patches such as <code>Add/RemoveGlobalImport</code>,
      you need to allow scalafix to organize you imports.
      To minimize the diff from import patches, it's best to run scalafix once
      with organize imports enabled and no zero patches.
      <pre><code class="scala scalatex-site-Styles-highlightMe">// Group and sort imports
imports.organize = true
// Example relative import: `import collection.immutable`
// Expanded: `import scala.collection.immutable`
imports.expandRelative = true
// Removes global imports that -Ywarn-unused-import complains about
// Requires sbt-scalafix/ScalafixMirror
imports.removeUnused = true
// Groups are separated by a blank line, example:
// import com.a
// import com.b
//
// import scala.collection.immutable._
imports.groups = [
  &quot;com.mycompany.*&quot;
  &quot;scala\\..*&quot;
]</code></pre></p>
  <h1 id="patches" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#patches" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>patches</h1>
    For simple use-cases, it's possible to write custom rewrites directly
    .scalafix.conf.
    <pre><code class="scala scalatex-site-Styles-highlightMe">patches.removeGlobalImports = [
  &quot;scala.collection.mutable&quot; # scala.meta.Importee
]
patches.addGlobalImports = [
  &quot;scala.collection.immutable&quot;
]
patches.replacements = [
  {
    from = &quot;_root_.scala.Seq.&quot; // scala.meta.Symbol
    to = &quot;Seq&quot;
    additionalImports = [ &quot;scala.collection.immutable.Seq&quot; ]
  }
]
// Helper to see which symbols appear in your source files
debug.printSymbols = true</code></pre>
    For more advanced use-cases, I recommend you use <a href="#scalafix-core">scalafix-core</a>
    as a library.

  <h1 id="Alloptions" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#Alloptions" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>All options</h1>

    The following is the list of all available options along with their
    default values.
    <pre><code class="scala scalatex-site-Styles-highlightMe">patches.removeGlobalImports = []
patches.addGlobalImports = []
patches.replacements = []
reporter.outStream = java.io.PrintStream@3c62579d
reporter.minSeverity = &quot;[34minfo[0m&quot;
reporter.filter.&quot;.*&quot;
reporter.includeLoggerName = false
parser = scala.meta.internal.parsers.ScalametaParser$$anon$202@31a933a4
debug.printSymbols = false
fatalWarnings = true
rewrite = empty
dialect = Scala211
imports.organize = false
imports.alwaysUsed = []
imports.expandRelative = false
imports.groups = [
  &quot;scala.language.*&quot;
  &quot;(scala|scala\..*)$&quot;
  &quot;(java|java\..*)$&quot;
]
imports.removeUnused = false
imports.groupByPrefix = false
imports.spaceAroundCurlyBrace = false</code></pre>


  

<div style="margin: 0px;color: #333;text-align: center;padding: 2.5em 2em 0;border-bottom: 1px solid #eee;display: block;" id="Rewrites" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><h1 style="margin: 0.2em 0;font-size: 3em;font-weight: 300;">Rewrites<a class=" scalatex-site-Styles-headerLink" href="#Rewrites" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a></h1><br /></div>
  <p>
    Scalafix comes with a few rewrites out-of-the-box.
    These rewrites have been chosen to meet the long-term goal of scalafix to
    <a href="http://scala-lang.org/blog/2016/05/30/scala-center-advisory-board.html#the-first-meeting">clarify the Scala to Dotty migration path</a>.
    To create custom rewrites, see <a href="#scalafix-core">scalafix-core</a>.
</p>
  <h1 id="ExplicitImplicit" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#ExplicitImplicit" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>ExplicitImplicit</h1>
    Dotty requires implicit <code>val</code>s and <code>def</code>s to explicitly annotate
    return types.
    The ExplicitImplicit rewrite inserts the inferred type from the
    compiler for implicit definitions that are missing an explicit return type.
    For example,

    <pre><code class="scala scalatex-site-Styles-highlightMe">// before
implicit val tt = liftedType
// after
implicit val tt: TypedType[R] = liftedType
</code></pre>
    <ul>
      <li>
        <b>Note. </b>. This rewrite is new and may insert an ambiguous type name in rare cases.
        For example, running ExplicitImplicit (as of v0.2.0) on the Scala.js repo
        did introduce compilation errors.</li>
      <li>
        scalafix tries to minimize the inserted type signature, by using
        available variable names in scope.</li>
      <li>
        scalafix will insert the fully qualified type name if the type
        is not in scope.
</li></ul>
  <h1 id="ProcedureSyntax" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#ProcedureSyntax" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>ProcedureSyntax</h1>
    &quot;Procedure syntax&quot; is not supported in Dotty.
    Methods that use procedure syntax should use regular method syntax instead.
    For example,

    <pre><code class="scala scalatex-site-Styles-highlightMe">// before: procedure syntax
def main(args: Seq[String]) {
  println(&quot;Hello world!&quot;)
}
// after: regular syntax
def main(args: Seq[String]): Unit = {
  println(&quot;Hello world!&quot;)
}
</code></pre>
  <h1 id="VolatileLazyVal" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#VolatileLazyVal" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>VolatileLazyVal</h1>
    <p>
      Adds a <code>@volatile</code> annotation to lazy vals.
      The <code>@volatile</code> annotation is needed to maintain thread-safe
      behaviour of lazy vals in Dotty.
</p>
    <pre><code class="scala scalatex-site-Styles-highlightMe">// before
lazy val x = ...
// after
@volatile lazy val x = ...
</code></pre>
    <p>
      With <code>@volatile</code>, Dotty uses a deadlock free scheme that is
      comparable-if-not-faster than the scheme used in scalac.

</p>
  <h1 id="Plannedrewrites..." style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#Plannedrewrites..." style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>Planned rewrites...</h1>
    See <a href="https://github.com/scalacenter/scalafix/issues?q=is%3Aissue+is%3Aopen+label%3Arewrite">here</a>

  

<div style="margin: 0px;color: #333;text-align: center;padding: 2.5em 2em 0;border-bottom: 1px solid #eee;display: block;" id="scalafix-testkit" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><h1 style="margin: 0.2em 0;font-size: 3em;font-weight: 300;">scalafix-testkit<a class=" scalatex-site-Styles-headerLink" href="#scalafix-testkit" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a></h1><br /></div>
  <p>
    Use scalafix-testkit for a rapid edit/run/debug cycle while implementing
    semantic scalafix rewrites.
</p>
  <p>
    <b>Note.</b> Scalafix-testkit is a new module under active development and
    is currently only available as a pre-release version. To depend on
    scalafix-testkit

    <pre><code class="scala scalatex-site-Styles-highlightMe">resolvers += Resolver.bintrayRepo(&quot;scalameta&quot;, &quot;maven&quot;)
libraryDependencies += &quot;ch.epfl.scala&quot; % &quot;scalafix-testkit&quot; % &quot;0.3.4+24-b98411b0&quot; % Test cross CrossVersion.full
</code></pre></p>
  <p>
    Tests are written in <code>.source</code> text files in some directory
    of your project. A good place to put the tests is under <code>src/test/resources</code>
    so that tests re-run on file save when using <code>~test</code>.
</p>
  <p>
    Unit tests are written in the following format:
    <pre><code class="scala scalatex-site-Styles-highlightMe">&lt;&lt;&lt; This is a test name
object OriginalCode
&gt;&gt;&gt;
object ExpectedCode
&lt;&lt;&lt; This is another test file
object OriginalCode
&gt;&gt;&gt;
object ExpectedCode</code></pre></p>
  <p>
    To setup a test suite with scalafix-testkit:

    <pre class=" scalatex-site-Styles-hoverContainer"><code class="scala scalatex-site-Styles-highlightMe">package scalafix.tests

import scalafix.testkit._

class SemanticTests
    extends SemanticRewriteSuite( /* optionally pass in custom classpath */ ) {
  // directory containing .source files
  val testDir = &quot;scalafix-tests/src/test/resources&quot;
  DiffTest.fromFile(new java.io.File(testDir)).foreach(runDiffTest)
}</code><a class=" scalatex-site-Styles-headerLink" style="position: absolute;right: 0.5em;top: 0.5em;display: block;font-size: 24px;" href="https://github.com/scalacenter/scalafix/tree/master/scalafix-tests/src/test/scala/scalafix/tests/SemanticTests.scala#L0-L10" target="_blank"><i class="fa fa-link "></i></a></pre>
</p>
  <p>
    Define <code>.scalafix.conf</code> configuration at the top of a <code>.source</code> file:

    <pre><code class="scala scalatex-site-Styles-highlightMe">$ cat MyTest.source
rewrites = [ProcedureSyntax]
&lt;&lt;&lt; basic main function
object Main { def main(args: Seq[String]) { println(args) } }
&gt;&gt;&gt;
object Main { def main(args: Seq[String]): Unit = { println(args) } }
</code></pre></p>
  <p>
    When a test fails, a failure report shows a diff between the expected
    and obtained output of the rewrite.

    <pre><code class="scala scalatex-site-Styles-highlightMe">===========
=&gt; Obtained
===========
object Main { def main(args: Seq[String]) { println(args) } }

=======
=&gt; Diff
=======
- object Main { def main(args: Seq[String]) { println(args) } }
+ object Main { def main(args: Seq[String]): Unit = { println(args) } }
</code></pre></p>
  <p>
    To run only a single test, prefix the test name with <code>ONLY</code>
    <pre><code class="scala scalatex-site-Styles-highlightMe">&lt;&lt;&lt; ONLY This test will run
object OriginalCode
&gt;&gt;&gt;
object ExpectedCode
&lt;&lt;&lt; This test is skipped
object OriginalCode
&gt;&gt;&gt;
object ExpectedCode
</code></pre></p>
  <p>
    To skip a single test, prefix the test name with <code>SKIP</code>
    <pre><code class="scala scalatex-site-Styles-highlightMe">&lt;&lt;&lt; SKIP This test will NOT run
object OriginalCode
&gt;&gt;&gt;
object ExpectedCode
&lt;&lt;&lt; This test will run
object OriginalCode
&gt;&gt;&gt;
object ExpectedCode
</code></pre></p>
  <p>
    For more resources on scalafix-testkit, clone the scalafix repo and
    look at the sources in the <code>scalafix-tests</code> module.</p>

  

<div style="margin: 0px;color: #333;text-align: center;padding: 2.5em 2em 0;border-bottom: 1px solid #eee;display: block;" id="FAQ/Troubleshooting" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><h1 style="margin: 0.2em 0;font-size: 3em;font-weight: 300;">FAQ / Troubleshooting<a class=" scalatex-site-Styles-headerLink" href="#FAQ/Troubleshooting" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a></h1><br /></div>

  If you have any questions, don't hesitate to ask on Gitter. <a href="https://gitter.im/scalacenter/scalafix?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://camo.githubusercontent.com/382ebf95f5b4df9275ac203229928db8c8fd5c50/68747470733a2f2f6261646765732e6769747465722e696d2f6f6c6166757270672f7363616c61666d742e737667" alt="Join the chat at https://gitter.im/scalacenter/scalafix" data-canonical-src="https://badges.gitter.im/scalacenter/scalafix.svg" style="max-width:100%;"></a>

  <h1 id="Enclosingtree[2873]doesnotincludetree[2872]" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#Enclosingtree[2873]doesnotincludetree[2872]" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>Enclosing tree [2873] does not include tree [2872]</h1>
    Scalafix  requires code to compile with the scalac option <code>-Yrangepos</code>.
    A macro that emits invalid tree positions is usually the cause of
    compiler errors triggered by <code>-Yrangepos</code>.
    Other tools like the presentation compiler (ENSIME) or
    scala.meta semantic api also require <code>-Yrangepos</code> to work properly.

  <h1 id="sbt.Init$RuntimeUndefined:Referencestoundefinedsettingsatruntime." style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#sbt.Init$RuntimeUndefined:Referencestoundefinedsettingsatruntime." style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>sbt.Init$RuntimeUndefined: References to undefined settings at runtime.</h1>
    You might be using an old version of sbt.
    sbt-scalafix requires sbt 0.13.13 or higher.

  <h1 id="(root/compile:compileIncremental)java.lang.reflect.InvocationTargetException" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#(root/compile:compileIncremental)java.lang.reflect.InvocationTargetException" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>(root/compile:compileIncremental) java.lang.reflect.InvocationTargetException</h1>
    You might have a typo in <code>.scalafix.conf</code>,
    run <code>last root/compile:compileIncremental</code> to see the full stack trace.


  

<div style="margin: 0px;color: #333;text-align: center;padding: 2.5em 2em 0;border-bottom: 1px solid #eee;display: block;" id="Changelog" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><h1 style="margin: 0.2em 0;font-size: 3em;font-weight: 300;">Changelog<a class=" scalatex-site-Styles-headerLink" href="#Changelog" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a></h1><br /></div>
  <h1 id="0.3.4" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#0.3.4" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>0.3.4</h1>
    <ul>
      <li>
        New <code>RenameSymbol</code> tree patch, which behaves similar to &quot;Rename
        method/variable&quot; refactorings in IDEs.</li>
      <li>
        New module: <a href="#scalafix-testkit">scalafix-testkit</a>.</li>
      <li>
        Rewrites can now report info/warn/error messages via
         <code>ctx.reporter.info/warn/error</code>, see <a href="https://github.com/scalacenter/scalafix/pulls/118">#118</a>.</li>
      <li>
        2.11 support is now only for 2.11.10.</li></ul>
  <h1 id="0.3.3" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#0.3.3" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>0.3.3</h1>
    <ul>
      <li>
        NOTE.
        scalafix-core and scalafix-cli are now published as
        <code>CrossVersion.full</code>, meaning the artifact IDs now have a <code>_2.11.11</code> suffix. To depend on them,
        <pre><code class="scala scalatex-site-Styles-highlightMe">// OK
libraryDependencies +=
  &quot;ch.epfl.scala&quot; % &quot;scalafix-core&quot; % &quot;0.3.4+24-b98411b0&quot; cross CrossVersion.full
// Error
libraryDependencies +=
  &quot;ch.epfl.scala&quot; %% &quot;scalafix-core&quot; % &quot;0.3.4+24-b98411b0&quot;</code></pre></li>
      <li>
        NOTE.
        This version depends on a pre-release of scala.meta, which is publised
        to the scalameta bintray repository and requires
        <pre><code class="scala scalatex-site-Styles-highlightMe">resolvers += Resolver.bintrayRepo(&quot;scalameta&quot;, &quot;maven&quot;)</code></pre></li>
      <li>
        scalafix-cli new supports running semantic rewrites with the
        <code>--classpath/--sourcepath</code> options.</li>
      <li>
        scalafix-cli now supports <code>.sbt</code> files.</li>
      <li>
        New documentation for <a href="#scalafix-cli">scalafix-cli</a>.</li></ul>
  <h1 id="0.3.2" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#0.3.2" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>0.3.2</h1>
    See <a href="https://github.com/scalacenter/scalafix/milestone/2?closed=1">merged PRs</a>.
    <ul>
      <li>
        It is possible to load custom rewrites from source with
        <code>rewrites = [&quot;file:MyRewrite.scala&quot;]</code> or urls
        <code>rewrites = [&quot;https://gist./../.Rewrite.scala&quot;]</code>.
        See <a href="#Customrewrites">Custom rewrites</a> for more info.</li>
      <li>
        <code>imports.groups = []</code> can now be empty, thank you <a href="https://github.com/mlangc">@mlangc</a>
        for contributing this fix!</li>
      <li>
        Named imports are no longer subsumed by wildcard imports, which could
        previously introduce ambiguous imports.</li>
      <li>
        <code>imports.expandRelative = false</code> by default.
        Expanded relative imports can create unused imports.
        If you want to expand relative imports, you may need to run scalafix twice
        to remove unused imports created by scalafix.</li>
      <li>
        Fixed minor ordering bugs in organize imports.</li></ul>
  <h1 id="0.3.1" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#0.3.1" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>0.3.1</h1>
    <ul>
      <li>
        Fixed a bug in organize imports when there was no import in the
        original source file.</li>
      <li>
        Patch.apply and OrganizeImports no longer accept a redundant <code>tree: Tree</code> argument, the
        <code>ctx</code> already contains the tree.</li>
      <li>
        Xor2Either is disabled by default now, it was enabled by default
        causing the <code>scalafix</code> command to slow down significantly.
        Rewrites using <code>scala.meta.Mirror</code> should not experience a
        slowdown.</li>
      <li>
        Added new <code>Rename(from: Name, to: Name)</code> tree patch that's
        accesible via the scalafix-library.</li></ul>
  <h1 id="0.3.0" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#0.3.0" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>0.3.0</h1>
    <ul>
      <li>
        Scalafix now uses the scala.meta semantic API!
        See <a href="https://github.com/scalameta/scalameta/blob/master/changelog/1.6.0.md#semantic-api">scala.meta 1.6 release notes</a>
        for more details about the semantic api.
        This first release of the scala.meta semantic API enables rewrites to query for the &quot;symbol&quot;
        of a name that appears in a Scala source file.
        A symbol is a unique identifier of a definition such as a class, val, def or trait.</li>
      <li>
        To demonstrate the capabilities of rewrites using the scala.meta semantic API,
        we have included an example rewrite called <a href="https://github.com/scalacenter/scalafix/blob/master/core/src/main/scala/scalafix/rewrite/Xor2Either.scala">Xor2Either</a>.
        The rewrite migrates usage of <code>cats.data.Xor</code> to <code>scala.util.Either</code>.</li>
      <li>
        Rewrites can now be implemented in terms of &quot;tree patches&quot;, which are high
        level descriptions of common refactoring operations.
        Tree patches can be composed to build more advanced refactorings
        such as <code>Xor2Either</code>.
        The current available tree patches are
        <ul>
          <li>
            <code>Replace</code>: Replaces usage of a symbol with another name.</li>
          <li>
            <code>AddGlobalImport</code>: Adds a top-level import to source file.</li>
          <li>
            <code>RemoveGlobalImport</code>: Removes a top-level import from source file.</li></ul>
        <p>
          Special thanks go to <a href="https://github.com/ShaneDelmore">@ShaneDelmore</a> for helping out try the
          scalafix patch API at every step of its development. His feedback has
          been invaluable in improving the design of the API.</p></li>
      <li>
        Configuration in .scalafix.conf has been greatly improved to support a wide range
        of options.
        Examples, see <a href="#patches">patches</a>, <a href="#imports">imports</a> and <a href="#Alloptions">All options</a>.</li></ul>
  <h1 id="0.2.1" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#0.2.1" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>0.2.1</h1>
    <ul>
      <li>
        <code>sbt scalafix</code> runs <code>ExplicitImplicit</code> and <code>ProcedureSyntax</code>
        by default when there is no <code>.scalafix.conf</code>.</li>
      <li>
        Upgraded scala.meta dependency to fix parsing + pretty-printer bugs.</li></ul>
  <h1 id="0.2.0" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#0.2.0" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>0.2.0</h1>
    <ul>
      <li>
        First semantic rewrite! See <a href="#ExplicitImplicit">ExplicitImplicit</a></li>
      <li>
        Removed command line interface in favor of compiler plugin.
        Why? To run semantic rewrites, scalafix needs to compile source files.
        The scalafix command line tool has no aspiration to become a build tool.</li></ul>
  <h1 id="0.1.0" style="display: block;" class=" scalatex-site-Styles-hoverContainer scalatex-site-Styles-headerTag"><a class=" scalatex-site-Styles-headerLink" href="#0.1.0" style="position: absolute;right: 0px;"><i class="fa fa-link"></i></a>0.1.0</h1>
    <ul>
      <li>
        New command line tool: <code>scalafix</code>.
        (EDIT: superseded by scalafix-nsc compiler plugin in v0.2)</li>
      <li>
        New SBT plugin: <code>sbt-scalafix</code>. See <a href="#sbt-scalafix">sbt-scalafix</a>.</li>
      <li>
        Two rewrite rules:
        <a href="#ProcedureSyntax">ProcedureSyntax</a>
        and
        <a href="#VolatileLazyVal">VolatileLazyVal</a>.</li></ul>
</div>


<span></span>

</div><script>
    scalatex.scrollspy.Controller().main(
      [{"value":"scalafix - a Scala rewrite tool","children":[{"value":"Links","children":[]},{"value":"Installation","children":[{"value":"sbt-scalafix","children":[]},{"value":"sbt-scalahost","children":[]},{"value":"scalafix-core","children":[]},{"value":"scalafix-cli","children":[]},{"value":"scalafix-nsc","children":[]}]},{"value":"Configuration","children":[{"value":"rewrites","children":[{"value":"Pre-made rewrites","children":[]},{"value":"Custom rewrites","children":[]}]},{"value":"imports","children":[]},{"value":"patches","children":[]},{"value":"All options","children":[]}]},{"value":"Rewrites","children":[{"value":"ExplicitImplicit","children":[]},{"value":"ProcedureSyntax","children":[]},{"value":"VolatileLazyVal","children":[]},{"value":"Planned rewrites...","children":[]}]},{"value":"scalafix-testkit","children":[]},{"value":"FAQ / Troubleshooting","children":[{"value":"Enclosing tree [2873] does not include tree [2872]","children":[]},{"value":"sbt.Init$RuntimeUndefined: References to undefined settings at runtime.","children":[]},{"value":"(root/compile:compileIncremental) java.lang.reflect.InvocationTargetException","children":[]}]},{"value":"Changelog","children":[{"value":"0.3.4","children":[]},{"value":"0.3.3","children":[]},{"value":"0.3.2","children":[]},{"value":"0.3.1","children":[]},{"value":"0.3.0","children":[]},{"value":"0.2.1","children":[]},{"value":"0.2.0","children":[]},{"value":"0.1.0","children":[]}]}]}]
  )</script><script>
    ['DOMContentLoaded', 'load'].forEach(function(ev){
      addEventListener(ev, function(){
        Array.prototype.forEach.call(
          document.getElementsByClassName('scalatex-site-Styles-highlightMe'),
          hljs.highlightBlock
        );
      })
    })
  </script></body></html>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         